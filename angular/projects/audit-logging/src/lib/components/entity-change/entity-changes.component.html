<div class="card">
  <div class="card-body pb-lg-3">
    <form [formGroup]="form" (ngSubmit)="handleSubmit()">
      <div class="row">
        <div class="col-md-12 col-lg-4 col-xxl-3">
          <label class="form-label">{{ 'AbpAuditLogging::ChangeTime' | abpLocalization }}</label>
          <abp-date-range-picker
            formControlName="times"
            startDateProp="startDate"
            endDateProp="endDate"
          />
        </div>
        <div class="col-md-6 col-lg-3 col-xxl-3">
          <label class="form-label" for="change-type">{{
            'AbpAuditLogging::ChangeType' | abpLocalization
          }}</label>
          <select
            id="change-type"
            class="form-select form-control"
            formControlName="entityChangeType"
            (change)="handleSubmit()"
          >
            <option [ngValue]=""></option>
            @for (type of changeTypes; track type.key) {
              <option [ngValue]="type.value">
                {{ 'AbpAuditLogging::' + type.key | abpLocalization }}
              </option>
            }
          </select>
        </div>
        <div class="col-md-6 col-lg-3 col-xxl-3">
          <label class="form-label" for="entity-type-full-name">{{
            'AbpAuditLogging::EntityId' | abpLocalization
          }}</label>
          <input id="entity-id" type="text" class="form-control" formControlName="entityId" />
        </div>
        <div class="col-md-6 col-lg-3 col-xxl-3">
          <label class="form-label" for="entity-type-full-name">{{
            'AbpAuditLogging::EntityTypeFullName' | abpLocalization
          }}</label>
          <input
            id="entity-type-full-name"
            type="text"
            class="form-control"
            formControlName="entityTypeFullName"
          />
        </div>
      </div>
      <div class="row justify-content-end">
        <div class="col-md-6 col-lg-3 col-xxl-3">
          <div class="mt-3 mb-lg-0 d-grid">
            <button type="submit" class="btn btn-primary">
              <span>
                {{ 'AbpAuditLogging::Refresh' | abpLocalization }}
              </span>
            </button>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 col-xxl-3">
          <div class="mt-3 mb-lg-0 d-grid">
            <button
              type="button"
              class="text-nowrap btn btn-outline-success"
              (click)="exportToExcel()"
            >
              <i class="fa fa-file-excel-o" aria-hidden="true"></i>
              <span>
                {{ 'AbpAuditLogging::ExportToExcel' | abpLocalization }}
              </span>
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
<div class="card m-0">
  <div class="card-body p-0">
    <ngx-datatable default [rows]="data" [count]="count" [list]="list">
      <ngx-datatable-column
        [name]="'AbpAuditLogging::Detail' | abpLocalization"
        [maxWidth]="150"
        [width]="150"
        [sortable]="false"
      >
        <ng-template let-row="row" let-i="rowIndex" ngx-datatable-cell-template>
          <abp-grid-actions [index]="i" [record]="row" text="AbpAuditLogging::Actions" />
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column
        [name]="'AbpAuditLogging::Time' | abpLocalization"
        [width]="230"
        prop="changeTime"
      >
        <ng-template ngx-datatable-cell-template let-value="value">
          {{ value | shortDateTime }}
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column
        [name]="'AbpAuditLogging::ChangeType' | abpLocalization"
        [width]="140"
        [sortable]="false"
      >
        <ng-template let-row="row" ngx-datatable-cell-template>
          {{ 'AbpAuditLogging::' + changeType[row.changeType] | abpLocalization }}
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column
        [name]="'AbpAuditLogging::TenantId' | abpLocalization"
        [width]="150"
        [sortable]="false"
      >
        <ng-template let-row="row" ngx-datatable-cell-template>
          <div abpEllipsis>{{ row.tenantId }}</div>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column
        [name]="'AbpAuditLogging::EntityId' | abpLocalization"
        [width]="150"
        [sortable]="false"
      >
        <ng-template let-row="row" ngx-datatable-cell-template>
          <div abpEllipsis>{{ row.entityId }}</div>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column
        [name]="'AbpAuditLogging::EntityTypeFullName' | abpLocalization"
        [width]="150"
        [sortable]="false"
      >
        <ng-template let-row="row" ngx-datatable-cell-template>
          <div abpEllipsis>{{ row.entityTypeFullName }}</div>
        </ng-template>
      </ngx-datatable-column>
    </ngx-datatable>
  </div>
</div>
